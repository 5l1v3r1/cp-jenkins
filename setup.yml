---
# Variables that need to be defined are shown in this format: {{variable_name}}

admin:
  username: &admin_user sublimino
  password: password
  email: &admin_email jenkins@control-plane.io

credentials:
  - global:
      -
        username: sublimino
        password: password
        id: github-api-sublimino
        description: some-description

executors:
  master: 3

git:
  config:
    name: *admin_user
    email: *admin_email
    scopes: read:org,user:email

github:
  org_name:
  oauth:
    client_id:
    client_secret:

mailer:
  smtp_email: *admin_email
  smtp_password: password
  smtp_host:

jnlp_port: 5000

set_master_kill_switch: true
web_port: 8080
web_proto: http

seed_jobdsl: |
  freeStyleJob('maintenance-apply-dsl') {
      displayName('apply-dsl')
      description('Applies all the Jenkins DSLs in the jenkins-dsl repository.')

      checkoutRetryCount(3)

      properties {
          githubProjectUrl('https://github.com/sublimino/jenkins-dsl')
      }

      logRotator {
          numToKeep(100)
          daysToKeep(15)
      }

      scm {
          git {
              remote {
                  url('https://github.com/sublimino/jenkins-dsl.git')
              }
              branches('*/master')
              extensions {
                  wipeOutWorkspace()
                  cleanAfterCheckout()
              }
          }
      }

      triggers {
          githubPush()
      }

      wrappers { colorizeOutput() }

      steps {
          dsl {
              external('**/*.groovy')
              removeAction('DELETE')
              removeViewAction('DELETE')
              additionalClasspath('.')
          }
      }

      publishers {
          extendedEmail {
              recipientList('$DEFAULT_RECIPIENTS')
              contentType('text/plain')
              triggers {
                  stillFailing {
                      attachBuildLog(true)
                  }
              }
          }

          wsCleanup()
      }
  }
